# STEP Blockchain API - Environment Configuration
# Copy this file to .env and fill in your values

# ============================================================================
# DATABASE
# ============================================================================

# MongoDB connection URI (REQUIRED)
# Format: mongodb://[username:password@]host[:port]/database
# Example: mongodb://localhost:27017/step
# Production: mongodb+srv://user:pass@cluster.mongodb.net/step
MONGODB_URI=mongodb://localhost:27017/step

# ============================================================================
# VALIDATOR CONFIGURATION
# ============================================================================

# GPS Accuracy Threshold (meters)
# Proofs with accuracy worse than this will be rejected
# Default: 50 meters
# Lower = stricter (better security, fewer valid proofs)
# Higher = looser (more valid proofs, lower security)
GPS_MAX_ACCURACY_M=50

# Speed Limit (meters per second)
# Maximum allowed movement speed between consecutive proofs
# Default: 15 m/s (54 km/h, 33.5 mph)
# Detects teleportation attacks and GPS spoofing
# Cars at highway speed may exceed this
PROOF_SPEED_LIMIT_MPS=15

# Moratorium Period (milliseconds)
# Minimum time required between consecutive proofs from same account
# Default: 10000 ms (10 seconds)
# Prevents spam and rapid-fire proof submission
PROOF_MORATORIUM_MS=10000

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

# API Server Port
# Default: 3002 (3000 is used by frontend, 3001 by other services)
PORT=3002

# Node Environment
# Values: development | production | test
# Affects logging verbosity and error messages
NODE_ENV=development

# ============================================================================
# NOTES
# ============================================================================

# Phase 2 Configuration:
# - MongoDB is required for proof validation and storage
# - All validator thresholds have sensible defaults
# - Adjust GPS_MAX_ACCURACY_M based on your target use case
# - Adjust PROOF_SPEED_LIMIT_MPS if users will be in vehicles
# - Adjust PROOF_MORATORIUM_MS to balance spam vs user experience

# Security Notes:
# - Keep MongoDB credentials secure (use environment-specific secrets)
# - In production, use connection string with authentication
# - Consider using MongoDB Atlas for managed hosting
# - Never commit .env files to version control

# Performance Notes:
# - MongoDB connection uses pooling (maxPoolSize: 10, minPoolSize: 2)
# - Transactions ensure atomic proof validation
# - Compound unique index on (account, nonce) prevents replay attacks
